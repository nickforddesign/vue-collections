!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n["vue-collections"]=t()}(this,function(){"use strict";function n(n){return n&&n.__esModule?n.default:n}function t(n,t){return t={exports:{}},n(t,t.exports),t.exports}function e(n,t,e,o){function u(n,t){return r(n,t,e.slice(),o.slice())}var i=dn(n),c=dn(t);return!hn(function(n,t){return!hn(u,t,n)},c,i)}function r(n,t,o,u){if(bn(n,t))return!0;var i=Sn(n);if(i!==Sn(t))return!1;if(null==n||null==t)return!1;if("function"==typeof n["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n);if("function"==typeof n.equals||"function"==typeof t.equals)return"function"==typeof n.equals&&n.equals(t)&&"function"==typeof t.equals&&t.equals(n);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof n.constructor&&"Promise"===vn(n.constructor))return n===t;break;case"Boolean":case"Number":case"String":if(typeof n!=typeof t||!bn(n.valueOf(),t.valueOf()))return!1;break;case"Date":if(!bn(n.valueOf(),t.valueOf()))return!1;break;case"Error":return n.name===t.name&&n.message===t.message;case"RegExp":if(n.source!==t.source||n.global!==t.global||n.ignoreCase!==t.ignoreCase||n.multiline!==t.multiline||n.sticky!==t.sticky||n.unicode!==t.unicode)return!1}for(var c=o.length-1;c>=0;){if(o[c]===n)return u[c]===t;c-=1}switch(i){case"Map":return n.size===t.size&&e(n.entries(),t.entries(),o.concat([n]),u.concat([t]));case"Set":return n.size===t.size&&e(n.values(),t.values(),o.concat([n]),u.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var f=wn(n);if(f.length!==wn(t).length)return!1;var a=o.concat([n]),l=u.concat([t]);for(c=f.length-1;c>=0;){var s=f[c];if(!cn(s,t)||!r(t[s],n[s],a,l))return!1;c-=1}return!0}function o(n){return void 0!==n&&!Pn(n)}var u=n(t(function(n,t){t.__esModule=!0,t.default=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}})),i=t(function(n){var t=n.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),c=t(function(n){var t=n.exports={version:"2.5.1"};"number"==typeof __e&&(__e=t)}),f=function(n){if("function"!=typeof n)throw TypeError(n+" is not a function!");return n},a=function(n,t,e){if(f(n),void 0===t)return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,o){return n.call(t,e,r,o)}}return function(){return n.apply(t,arguments)}},l=function(n){return"object"==typeof n?null!==n:"function"==typeof n},s=function(n){if(!l(n))throw TypeError(n+" is not an object!");return n},p=function(n){try{return!!n()}catch(n){return!0}},y=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),d=i.document,h=l(d)&&l(d.createElement),v=function(n){return h?d.createElement(n):{}},b=!y&&!p(function(){return 7!=Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a}),m=function(n,t){if(!l(n))return n;var e,r;if(t&&"function"==typeof(e=n.toString)&&!l(r=e.call(n)))return r;if("function"==typeof(e=n.valueOf)&&!l(r=e.call(n)))return r;if(!t&&"function"==typeof(e=n.toString)&&!l(r=e.call(n)))return r;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,O={f:y?Object.defineProperty:function(n,t,e){if(s(n),t=m(t,!0),s(e),b)try{return g(n,t,e)}catch(n){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(n[t]=e.value),n}},j=function(n,t){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:t}},_=y?function(n,t,e){return O.f(n,t,j(1,e))}:function(n,t,e){return n[t]=e,n},w=function(n,t,e){var r,o,u,f=n&w.F,l=n&w.G,s=n&w.S,p=n&w.P,y=n&w.B,d=n&w.W,h=l?c:c[t]||(c[t]={}),v=h.prototype,b=l?i:s?i[t]:(i[t]||{}).prototype;l&&(e=t);for(r in e)(o=!f&&b&&void 0!==b[r])&&r in h||(u=o?b[r]:e[r],h[r]=l&&"function"!=typeof b[r]?e[r]:y&&o?a(u,i):d&&b[r]==u?function(n){var t=function(t,e,r){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(t);case 2:return new n(t,e)}return new n(t,e,r)}return n.apply(this,arguments)};return t.prototype=n.prototype,t}(u):p&&"function"==typeof u?a(Function.call,u):u,p&&((h.virtual||(h.virtual={}))[r]=u,n&w.R&&v&&!v[r]&&_(v,r,u)))};w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128;var S=w;S(S.S+S.F*!y,"Object",{defineProperty:O.f});var A=c.Object,E=function(n,t,e){return A.defineProperty(n,t,e)},P=t(function(n){n.exports={default:E,__esModule:!0}});n(P);var M=n(t(function(n,t){t.__esModule=!0;var e=function(n){return n&&n.__esModule?n:{default:n}}(P);t.default=function(){function n(n,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,e.default)(n,o.key,o)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}()})),k=function(n){return null!=n&&"object"==typeof n&&!0===n["@@functional/placeholder"]},x=function(n){return function t(e){return 0===arguments.length||k(e)?t:n.apply(this,arguments)}},q=function(n){return function t(e,r){switch(arguments.length){case 0:return t;case 1:return k(e)?t:x(function(t){return n(e,t)});default:return k(e)&&k(r)?t:k(e)?x(function(t){return n(t,r)}):k(r)?x(function(t){return n(e,t)}):n(e,r)}}},$=q(function(n,t){for(var e=t,r=0;r<n.length;){if(null==e)return;e=e[n[r]],r+=1}return e}),I=function(n){if(void 0==n)throw TypeError("Can't call method on  "+n);return n},F=function(n){return Object(I(n))},C={}.hasOwnProperty,N=function(n,t){return C.call(n,t)},T={}.toString,B=function(n){return T.call(n).slice(8,-1)},U=Object("z").propertyIsEnumerable(0)?Object:function(n){return"String"==B(n)?n.split(""):Object(n)},z=function(n){return U(I(n))},R=Math.ceil,D=Math.floor,G=function(n){return isNaN(n=+n)?0:(n>0?D:R)(n)},L=Math.min,W=function(n){return n>0?L(G(n),9007199254740991):0},V=Math.max,H=Math.min,J=function(n,t){return(n=G(n))<0?V(n+t,0):H(n,t)},K=i["__core-js_shared__"]||(i["__core-js_shared__"]={}),Q=0,X=Math.random(),Y=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++Q+X).toString(36))},Z=function(n){return K[n]||(K[n]={})}("keys"),nn=function(n){return function(t,e,r){var o,u=z(t),i=W(u.length),c=J(r,i);if(n&&e!=e){for(;i>c;)if((o=u[c++])!=o)return!0}else for(;i>c;c++)if((n||c in u)&&u[c]===e)return n||c||0;return!n&&-1}}(!1),tn=function(n){return Z[n]||(Z[n]=Y(n))}("IE_PROTO"),en=function(n,t){var e,r=z(n),o=0,u=[];for(e in r)e!=tn&&N(r,e)&&u.push(e);for(;t.length>o;)N(r,e=t[o++])&&(~nn(u,e)||u.push(e));return u},rn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),on=Object.keys||function(n){return en(n,rn)};!function(n,t){var e=(c.Object||{})[n]||Object[n],r={};r[n]=t(e),S(S.S+S.F*p(function(){e(1)}),"Object",r)}("keys",function(){return function(n){return on(F(n))}});var un=c.Object.keys;n(t(function(n){n.exports={default:un,__esModule:!0}}));var cn=function(n,t){return Object.prototype.hasOwnProperty.call(t,n)},fn=Object.prototype.toString,an=function(){return"[object Arguments]"===fn.call(arguments)?function(n){return"[object Arguments]"===fn.call(n)}:function(n){return cn("callee",n)}},ln=Array.isArray||function(n){return null!=n&&n.length>=0&&"[object Array]"===Object.prototype.toString.call(n)},sn=function(n){return"[object Object]"===Object.prototype.toString.call(n)},pn=function(n){return"[object String]"===Object.prototype.toString.call(n)},yn=x(function(n){return null!=n&&"function"==typeof n["fantasy-land/empty"]?n["fantasy-land/empty"]():null!=n&&null!=n.constructor&&"function"==typeof n.constructor["fantasy-land/empty"]?n.constructor["fantasy-land/empty"]():null!=n&&"function"==typeof n.empty?n.empty():null!=n&&null!=n.constructor&&"function"==typeof n.constructor.empty?n.constructor.empty():ln(n)?[]:pn(n)?"":sn(n)?{}:an(n)?function(){return arguments}():void 0}),dn=function(n){for(var t,e=[];!(t=n.next()).done;)e.push(t.value);return e},hn=function(n,t,e){for(var r=0,o=e.length;r<o;){if(n(t,e[r]))return!0;r+=1}return!1},vn=function(n){var t=String(n).match(/^function (\w*)/);return null==t?"":t[1]},bn=q(function(n,t){return n===t?0!==n||1/n==1/t:n!==n&&t!==t}),mn=!{toString:null}.propertyIsEnumerable("toString"),gn=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],On=function(){return arguments.propertyIsEnumerable("length")}(),jn=function(n,t){for(var e=0;e<n.length;){if(n[e]===t)return!0;e+=1}return!1},_n="function"!=typeof Object.keys||On?function(n){if(Object(n)!==n)return[];var t,e,r=[],o=On&&an(n);for(t in n)!cn(t,n)||o&&"length"===t||(r[r.length]=t);if(mn)for(e=gn.length-1;e>=0;)cn(t=gn[e],n)&&!jn(r,t)&&(r[r.length]=t),e-=1;return r}:function(n){return Object(n)!==n?[]:Object.keys(n)},wn=x(_n),Sn=x(function(n){return null===n?"Null":void 0===n?"Undefined":Object.prototype.toString.call(n).slice(8,-1)}),An=r,En=q(function(n,t){return An(n,t,[],[])}),Pn=x(function(n){return null!=n&&En(n,yn(n))}),Mn=function(n,t,e){return t[n]<e[n]?1:-1},kn=function(n){n.$options.computed||(n.$options.computed={}),n._collection=n.$options.collection(),n.$options.computed.$collection={get:function(){return n._collection},set:function(t){n._collection=t}},n.$options.computed.collection=function(){return n._collection.models}},xn=function(n){kn(n)},qn=function(n){return{beforeCreate:function(){o(this.$options.collection)&&xn(this)},beforeDestroy:function(){$(["$options","collection"],this)&&this.$collection.reset()}}},$n=void 0,In=function(){function n(t){var e=t.model,r=void 0===e?null:e,o=t.id_attribute,i=void 0===o?"_id":o,c=t.basePath,f=void 0===c?"":c,a=(t.createPath,t.reverse),l=void 0!==a&&a,s=t.sortBy,p=void 0!==s&&s;u(this,n);var y=r,d=function(n){return y?new y(n).$data:n},h=function(n){var t=n;if(p){var e=Mn;t=n.sort(e.bind(null,p))}return l&&(t=n.reverse()),y&&(t=n.map(function(n){return d(n)})),t},v=function(n,t){var e=n.find(function(n){return n.id===t.id});e?e=t:n[l?"unshift":"push"](t)};return new $n({name:"collection",data:function(){return{models:[]}},computed:{$basePath:function(){return"function"==typeof f?f():f}},methods:{fetch:function(){var n=this,t=this.$request(""+this.$basePath);return t.then(function(t){h(t).map(function(t){v(n.models,t)})}),t},reset:function(){this.models=[]},add:function(n){v(this.models,d(n))},delete:function(n){var t=this.models.findIndex(function(t){return t[i]===n});t>-1&&this.models.splice(t,1)},find:function(n){return this.models.find(function(t){var e=!0;for(var r in n)t[r]!==n[r]&&(e=!1);return e})},filter:function(n){return this.models.filter(function(t){var e=!0;for(var r in n)t[r]!==n[r]&&(e=!1);return e})},encode:function(){var n=r;return this.models.map(function(t){return new n(t).encode()})}}})}return M(n,null,[{key:"init",value:function(n){$n="test"===process.env.NODE_ENV?require("vue"):n}}]),n}();return function(){function n(){u(this,n)}return M(n,null,[{key:"install",value:function(n){n.mixin(qn()),In.init(n)}},{key:"Collection",value:function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return new(Function.prototype.bind.apply(In,[null].concat(t)))}}]),n}()});